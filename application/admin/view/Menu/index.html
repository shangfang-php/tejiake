{include file='Public/header' /}
<!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="content-page">
        <!-- Start content -->
        <div class="content">
            <div class="container">



                <div class="row">
                    <div class="col-lg-12">
                        <div class="card-box">
                            <div class="dropdown pull-right">
                                    <a href="{:url('Menu/addMenu')}" class="card-drop">添加菜单</a>
                            </div>

                            <h4 class="header-title m-t-0 m-b-30">菜单列表</h4>

                            <p class="text-muted font-13 m-b-25">

                            </p>

                            <div class="table-responsive">
                                <table class="table m-0">
                                    <thead>
                                    <tr>
                                        <!--<th>#</th>-->
                                        <th>名称</th>
                                        <th>上级</th>
                                        <th>操作</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {volist name='list' id='vo' key="key"}
                                    <tr>
                                        <!--<th scope="row">{$key}</th>-->
                                        <td>{$vo.name}</td>
                                        <td></td>
                                        <td>
                                            <a href="{:url('Menu/editMenu',array('menuid'=>$vo['id']))}"  class="btn btn-primary">修改</a>

                                            <a href="javascript:void();" onclick="hideMenu({$vo['id']});" class="btn btn-inverse">
                                            {if condition="$vo['is_close'] eq 1"} 开启  {else/} 关闭{/if}
                                            </a>

                                            {if condition="$vo['is_delete'] eq 1"}
                                            <a href="javascript:void();" class="btn btn-danger">已删除</a>
                                            {else/}
                                            <a href="javascript:void();" onclick="delMenu({$vo['id']});" class="btn btn-warning">删除</a>
                                            {/if}
                                        </td>
                                    </tr>
                                    {if condition="!empty($vo['cmenu']) eq true"}
                                    {volist name="vo.cmenu" id="vv" key="k"}
                                    <tr>
                                       <!-- <th scope="row"></th>-->
                                        <td>--&nbsp;--&nbsp;--&nbsp;{$vv.name}</td>
                                        <td>{$vo.name}</td>
                                        <td>
                                            <a href="{:url('Menu/editMenu',array('menuid'=>$vv['id']))}" class="btn btn-primary">修改</a>
                                            <a href="javascript:void();" onclick="hideMenu({$vv['id']});" class="btn btn-inverse">{if condition="$vv['is_close'] eq 1"} 开启  {else/} 关闭{/if} </a>

                                            {if condition="$vv['is_delete'] eq 1"}
                                            <a href="javascript:void();" class="btn btn-danger">已删除</a>
                                               {else/}
                                            <a href="javascript:void();" onclick="delMenu({$vv['id']});" class="btn btn-warning">删除</a>
                                            {/if}
                                        </td>
                                    </tr>
                                    {/volist}
                                    {/if}
                                    {/volist}

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div><!-- end col -->

                </div>
                <!-- end row -->

            </div> <!-- container -->

        </div> <!-- content -->

        <footer class="footer">
            2016 © Adminto.
        </footer>

    </div>


    <!-- ============================================================== -->
    <!-- End Right content here -->
    <!-- ============================================================== -->

</div>
<!-- END wrapper -->



<script>
    var resizefunc = [];
</script>

<!-- jQuery  -->
<script src="__STATIC__/admin/js/jquery.min.js"></script>
<script src="__STATIC__/admin/js/bootstrap.min.js"></script>
<script src="__STATIC__/admin/js/detect.js"></script>
<script src="__STATIC__/admin/js/fastclick.js"></script>
<script src="__STATIC__/admin/js/jquery.slimscroll.js"></script>
<script src="__STATIC__/admin/js/jquery.blockUI.js"></script>
<script src="__STATIC__/admin/js/waves.js"></script>
<script src="__STATIC__/admin/js/jquery.nicescroll.js"></script>
<script src="__STATIC__/admin/js/jquery.scrollTo.min.js"></script>

<!-- App js -->
<script src="__STATIC__/admin/js/jquery.core.js"></script>
<script src="__STATIC__/admin/js/jquery.app.js"></script>
<script type="text/javascript">
    function hideMenu(param){
        $.get("{:url('Menu/hideMenu')}",{menuid:param}, function (dat) {
            var data = JSON.parse(dat);
            if(data.status == 1){
                alert(data.msg);
                window.location.href = window.location.href;
            }else{
                alert(data.msg);return false;
            }
        });
    }

    function delMenu(param){
        $.get("{:url('Menu/delMenu')}",{menuid:param}, function (dat) {
            var data = JSON.parse(dat);
            if(data.status == 1){
                alert(data.msg);
                window.location.href = window.location.href;
            }else{
                alert(data.msg);return false;
            }
        });
    }

</script>
</body>
</html>